<#import "../layout/adminLayout.ftl.html" as layout> <@layout.adminLayout
title=i18n("admin_Title_Transactions") >
<#import "../layout/macros.ftl.html" as pag/>
<h1 class="legendary">${i18n("admin_Title_Transactions")}</h1>
<#if (plist.getEntryCount() > 0) > 

<div class="btn-toolbar">
<@pag.mtxDeleter/>
		<form action="/admin/mtxs" id="transactionsEntryCount">
			<@pag.entrycount/>
		</form>
</div><!-- /btn-toolbar -->

<div class="tab-content">  
<#list 1..plist.getPageCount() as x > 
	<#if x = 1 >
		<div class="tab-pane active" id="mtxPage_${x}">  
	<#else>
		<div class="tab-pane" id="mtxPage_${x}">  
	</#if>
	
	<table class="table tablesorter table-hover table-condensed">
		<thead>
	    <tr>
		    <th class="header">${i18n("admin_Header_MtxTs")}</th>
		    <th class="header">${i18n("admin_Header_MtxStatus")}</th>
			<th class="header">${i18n("admin_Header_MtxSource")}</th>
		    <th class="header">${i18n("admin_Header_MtxRelay")}</th>
		    <th class="header">${i18n("admin_Header_MtxTarget")}</th>
	    </tr>
	    </thead>
	    <tbody>
		<#list plist.getPage(x) as mtx>
			<#switch mtx.status>
		    		<#case 100> <tr class="error" id="$mtx{mtx.id}"> <#break>
		    		<#case 200> <tr class="warning" id="mtx${mtx.id}"> <#break>
		    		<#case 300> <tr class="success" id="mtx${mtx.id}"> <#break>
		    		<#case 400> <tr class="error" id="mtx${mtx.id}"> <#break>
		    		<#case 500> <tr class="error" id="mtx${mtx.id}"> <#break>
		    		<#default> <tr>
			 </#switch>
					<td>${mtx.getTsAsString()}</td>
				    <td>
				    	<#switch mtx.status>
				    		<#case 100> ${i18n("admin_MtxStatus100")} <#break>
				    		<#case 200>	${i18n("admin_MtxStatus200")} <#break>
				    		<#case 300> ${i18n("admin_MtxStatus300")} <#break>
				    		<#case 400> ${i18n("admin_MtxStatus400")} <#break>
							<#case 500> ${i18n("admin_MtxStatus500")} <#break>
				    		<#default> ${i18n("admin_MtxStatusUnknown")}
				    	</#switch>
				    </td>
				    <td> ${(mtx.sourceaddr)!} </td>
				    <td> ${(mtx.relayaddr)!} </td>
				    <td> ${(mtx.targetaddr)!} </td>
			    </tr>
			</#list>
			</tbody>
	    </table>
	</div> <!-- /tab pane (active) --> 
</#list>

</div>  <!-- tab-content -->
<@pag.pager name=plist/>
<@pag.incSorter/>
<#else>
  	${i18n("msg_NoEntries")}
</#if>

</@layout.adminLayout>	
