<#import "../layout/defaultLayout.ftl.html" as layout> <@layout.xcLayout
title="Home Page">
<div class="row">
	<div class="span7">
		<form action="${contextPath}/mail/add" method="post" class="form-horizontal" id="addBoxForm">
			<fieldset>
				<legend>${i18n("createEmail_Title")}</legend>
				<!-- row: email-address -->
				<div class="control-group">
					<label class="control-label" for="address">	${i18n("createEmail_Label_Address")} </label>
					<div class="controls">
						<div class="input-append">
							<input class="input_full" type="text" id="address" name="address" value="${ (mbFrmDat.address)!}" required="required" />
							<span class="add-on">@</span>
							<select name="domain"> 
								<#list domain as String> 
									<#if (mbFrmDat.domain)??> 
										<#if (mbFrmDat.domain == String)>
											<option value="${String}" selected="selected">${String}</option>
										<#else>
											<option value="${String}">${String}</option> 
										</#if> 
									<#else>
										<option value="${String}">${String}</option> 
									</#if> 
								</#list>
							</select>
						</div>
					</div>
				</div>		
				<!-- row: life-time of the address -->
				<div class="control-group">
					<label class="control-label" for="datetime">${i18n("createEmail_Label_Duration")}</label>
					<div class="controls">
				  	<div id="datetimepicker" class="input-append">
				    	<input data-format="dd.MM.yyyy hh:mm" id="datetime" name="datetime" type="text" value="${ (mbFrmDat.datetime)!}" required="required"/>
					    <span id="pickr_span" class="add-on">
					      <i id="pickr_i" data-time-icon="icon-time" data-date-icon="icon-calendar" class="group1"></i>
					    </span>
				    </div>
				  </div>
				    <div class="controls">
				    	<input type="checkbox" id="chkUnlimited" onClick="toggle(this)" /> ${i18n("createEmail_Unlimited")}
				    </div>
				</div>
				<script type="text/javascript">
					$(function() {
						$('#datetimepicker').datetimepicker({
							language : '${lang}',
							pick12HourFormat : false,
							startDate : new Date()
						});
					});
					//handle the reset-button
					$(document).ready(function() {
						$('input#btnReset.btn').click(function reset() {
							var chkBxUnlimited = $('input#chkUnlimited');
							if(chkBxUnlimited.is(':checked')){
								var dateval = $('input#chkUnlimited').attr("value");
								//add the attribute to datetime input field 
								$('input#datetime').attr("value", dateval);
								//remove it from the checkbox 
								$('input#chkUnlimited').removeAttr("value");
							}
							$('input#chkUnlimited').removeAttr("checked");
							$('input#datetime').removeAttr("style");
							$('span#pickr_span').removeAttr("style");
							$('i#pickr_i').removeAttr("style");
							$('#addBoxForm')[0].reset();
						});
					});
				</script>
				
				<div class="form-actions">
					<input type="button" class="btn" id="btnReset"  value="${i18n("createEmail_Button_Reset")}" />
					<input type="submit" class="btn btn-primary" value="${i18n("createEmail_Button_New")}" />
				</div>
			</fieldset>
		</form>
	</div>
</div>
<script type="text/javascript" src="${contextPath}/assets/js/bootstrap-datetimepicker.min.js"></script> 
<script type="text/javascript" src="${contextPath}/assets/js/bootstrap-datetimepicker.de.js"></script> 
<script type="text/javascript" src="${contextPath}/assets/js/picker-enable.js"></script> 
    
</@layout.xcLayout>
