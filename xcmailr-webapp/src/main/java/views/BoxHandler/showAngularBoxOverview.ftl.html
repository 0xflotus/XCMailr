<!DOCTYPE html>
<html ng-app="BoxHandler">
  <head>
    <meta charset="utf-8">
    <title>XCMailr - ${i18n("mailbox_Title")}</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
    <link href="${contextPath}/assets/css/bootstrap.css" rel="stylesheet">
    <style type="text/css">
      body {
        padding-top: 60px;
        padding-bottom: 40px;
      }
    </style>
    <link href="${contextPath}/assets/css/bootstrap-responsive.css" rel="stylesheet">
    <link href="${contextPath}/assets/css/bootstrap-datetimepicker.min.css" rel="stylesheet">
    <link href="${contextPath}/assets/css/ownStyle.css" rel="stylesheet">
    <script src="${contextPath}/assets/js/jquery.js"></script>
    <script src="${contextPath}/assets/js/bootstrap.js"></script>
    <!-- Le HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="http://html5shim.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->

    <!-- Le fav and touch icons -->
    <link rel="shortcut icon" href="${contextPath}/assets/ico/favicon.ico">
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="${contextPath}/assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="${contextPath}/assets/ico/apple-touch-icon-114-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="72x72" href="${contextPath}/assets/ico/apple-touch-icon-72-precomposed.png">
    <link rel="apple-touch-icon-precomposed" href="${contextPath}/assets/ico/apple-touch-icon-57-precomposed.png">
    <script type="text/javascript" src="${contextPath}/assets/js/angular.min.js"> </script>
    <script type="text/javascript" src="${contextPath}/assets/js/ui-bootstrap-0.4.0.js"> </script>
    <script type="text/javascript" src="${contextPath}/assets/js/ui-bootstrap-tpls-0.4.0.js"> </script>
    <script type="text/javascript" src="${contextPath}/assets/js/controllers.js"> </script>
  </head>
  <body>
  
  <#include "../layout/header.ftl.html"/>
    <div class="container">
        <div class="container-fluid">
	    	<div class="row-fluid">

				<#if flash_error??>
				        <p class="alert alert-error"><strong> ${flash_error}</strong></p>
				</#if>
				<#if flash_success??>
				        <p class="alert alert-success"><strong> ${flash_success}</strong></p>
				</#if>
				<#if flash_info??>
				        <p class="alert alert-info"><strong> ${flash_info}</strong></p>
				</#if>
			</div>
			<div class="row-fluid">
			<!-- start page -->
<#import "../layout/macros.ftl.html" as pag/>
<div class="row" ng-controller="BoxListCtrl" id="overViewCtrl">
	<h1 class="legendary">${i18n("mailbox_Title")}</h1> 
	<!--mailboxoverview-->
	<table class="table table-hover table-condensed">
		<thead>
		    <tr>
		    	<th></th>
		    	<th class="header">${i18n("mailbox_Header_Address")}</th>	
		    	<th class="header">${i18n("mailbox_Header_Duration")}</th>
		    	<th class="header">${i18n("mailbox_Header_Forwards")}</th>
		    	<th class="header">${i18n("mailbox_Header_Suppressions")}</th>
		    	<th class="header">${i18n("mailbox_Header_Valid")}</th>
		    	<th>${i18n("mailbox_Header_Renew")}</th>
			    <th>${i18n("mailbox_Header_Delete")}</th>  	
			    <th>${i18n("mailbox_Header_Reset")}</th> 
			    <th>${i18n("mailbox_Header_Edit")}</th>
		    </tr>
		    </thead>
		    <tbody>
				<tr ng-repeat= "mBox in boxes" ng-class="{ true:'error', false:'success'}[mBox.expired]" id="{{mBox.id}}">   

		    	<td><input type="checkbox" class="bulkChk" id="chk_{{mBox.id}}" ng-model="selected[mBox.id]"></td>
				<td class="mbAddress">{{mBox.address}}&#064;{{mBox.domain}}</td>
				<td>{{mBox.dateTime}}</td>						
				<td>{{mBox.forwards}}</td>
				<td>{{mBox.suppressions}}</td>
				<td ng-if="!mBox.expired"> ${i18n("mailbox_Label_MailActive")} </td>
   				<td ng-if="mBox.expired"> ${i18n("mailbox_Label_MailExpired")} </td>
    			<td ng-if="!mBox.expired">
	    			<form class="nomarg" action="${contextPath}/mail/expire/{{mBox.id}}" method="post">
	                    <button type="submit" class="btn  btn-mini btn-link"  id="btnDeactivate{{mBox.boxId}}" value='${i18n("mailbox_Button_Deactivate")}'> <i class="icon-pause"></i></button>
	                </form>
                </td>
                <td ng-if="mBox.expired">
	    			<form class="nomarg" action="${contextPath}/mail/expire/{{mBox.id}}" method="post">
	                    <button type="submit" class="btn btn-mini btn-link"  id="btnDeactivate{{mBox.boxId}}" value='${i18n("mailbox_Button_Deactivate")}'>  <i class="icon-play"></i></button> 
	                </form>
                </td>
    			<td>
	    			<a class="btn btn-mini btn-link" ng-click="deleteBox({{mBox.id}}, $index, '${contextPath}')">
	    				<i class="icon-trash"></i> ${i18n("mailbox_Button_Delete")}
	    			</a>
                </td>
                <td>
	                <a class="btn btn-mini btn-link" ng-click="resetBox({{mBox.id}}, $index, '${contextPath}')">
	    				<i class="icon-repeat"></i> ${i18n("mailbox_Button_Reset")}
	    			</a>
                </td> 
		        <td> 
		        	<a href="${contextPath}/mail/edit/{{mBox.id}}" class="btn btn-mini btn-link" >
		        		<i class="icon-edit"></i> ${i18n("mailbox_Button_Edit")}
		        	</a>
		        </td>
			</tr>
		</tbody>
    </table>
<a href="javascript:;" data-ng-click="ShowSelected()">Show Selected</a>
<!-- end page -->
</div>
</div>
<#include "../layout/footer.ftl.html"/>
</div> <!-- /container -->

</body>
</html>

