<?xml version="1.0" encoding="UTF-8"?>
<testcase xmlns="http://xlt.xceptance.com/xlt-script/2" version="6" junit-test="true">
  <description>Test edit profile

# Setup and preparation 

- Start session, open homepage and delete all visible cookies
- Create Account

# Scope of test

- Enter profile data and submit the form
- Logout using the link in the header menu
- Login again to validate login data and goto the account page
- Validate personal profile data
- Logout using the global link in the header</description>
  <codecomment># Setup

- Generate email
- Generate password
- Start session</codecomment>
  <codecomment>---</codecomment>
  <codecomment>e-mail (extern)</codecomment>
  <module name="modules.helper.external.FHelper_getEmailAddressFromExternal">
    <parameter name="email_varName" value="email_varDynamic"/>
  </module>
  <codecomment>first name, new first name</codecomment>
  <module name="modules.helper.MHelper_Random_addRandomness">
    <parameter name="inputString" value="${defaultRegisterFirstName}"/>
    <parameter name="returnValue_varDynamic" value="newFirstName_varDynamic"/>
  </module>
  <codecomment>last name, new last name</codecomment>
  <module name="modules.helper.MHelper_Random_addRandomness">
    <parameter name="inputString" value="${defaultRegisterLastName}"/>
    <parameter name="returnValue_varDynamic" value="newLastName_varDynamic"/>
  </module>
  <codecomment>password, new password</codecomment>
  <module name="modules.helper.MHelper_Random_createPassword">
    <parameter name="password_varDynamic" value="oldPassword_varDynamic"/>
  </module>
  <codecomment># Setup

- Start session</codecomment>
  <module name="modules.helper.global.FHelper_Session_flowToStartSession"/>
  <codecomment>create test account</codecomment>
  <module name="modules.helper.global.FHelper_Register_createAccount">
    <parameter name="email" value="${email_varDynamic}"/>
    <parameter name="password_varDynamic" value="${password_varDynamic}"/>
  </module>
  <codecomment>---</codecomment>
  <codecomment># Scope</codecomment>
  <codecomment>Account

- Register account via header link
- Enter profile data
- Submit profile data
- Validate account page and nav
- Validate customer name
- Logout</codecomment>
  <module name="modules.helper.global.FHelper_Session_flowToStartSession"/>
  <action name="GoToSignIn"/>
  <module name="modules.global.headernav.MGlobal_Header_clickSignIn"/>
  <action name="LogIn"/>
  <module name="modules.pages.account.login.MAccount_Login_enterClickUserLoginData">
    <parameter name="username" value="${email_varDynamic}"/>
    <parameter name="password" value="${password_varDynamic}"/>
  </module>
  <action name="GoToEditProfile"/>
  <module name="modules.global.headernav.MGlobal_Header_clickEditProfile"/>
  <module name="modules.pages.account.MAccount_enterData">
    <parameter name="firstName" value="${newFirstName_varDynamic}"/>
    <parameter name="lastName" value="${newLastName_varDynamic}"/>
    <parameter name="language" value="de"/>
    <parameter name="oldPassword" value="${oldCountryCode}"/>
  </module>
  <module name="modules.pages.account.MAccount_clickSaveAccount"/>
  <action name="LogOut"/>
  <module name="modules.global.headernav.MGlobal_Header_clickSignOut"/>
  <module name="modules.pages.account.login.VAccount_Login_validateLogOutPage"/>
  <module name="modules.global.headernav.VGlobal_validatePageTitle">
    <parameter name="page_title" value="${title_home}"/>
  </module>
</testcase>